---
// Import the necessary AccordionItem component and JSON data
import AccordionItem from "@components/ui/blocks/AccordionItem.astro";

// Define props from Astro
const { title, faqs } = Astro.props;

// Define TypeScript interface for props
interface Faq {
  question: string;
  answer: string;
}

interface FaqGroup {
  subTitle?: string;
  faqs: Faq[];
}

interface Props {
  title: string;
  faqs: FaqGroup;
}
// Define a helper function to generate ids dynamically.
const makeId = (base: any, index: any) => `${base}${index + 1}`;

// Split faqs into two columns
const mid = Math.ceil(faqs.faqs.length / 2);
const leftFaqs = faqs.faqs.slice(0, mid);
const rightFaqs = faqs.faqs.slice(mid);
---
<section class="w-full px-4 md:px-8 pt-0 pb-12 text-neutral-100" style="background-color:#222730;">
  <div class="max-w-7xl mx-auto">
    <h2 class="font-h2">{title}</h2>
    {faqs.subTitle && (
      <h3 class="font-h3 text-left w-full lg:w-[70%] mb-8">{faqs.subTitle}</h3>
    )}
    <div class="flex flex-col lg:flex-row gap-8 md:gap-8">
      <div class="w-full lg:w-1/2 xl:w-1/2 lg:min-w-0 lg:flex-shrink">
        <div class="hs-accordion-group divide-y divide-neutral-200 dark:divide-neutral-700">
          {leftFaqs.map((question, i) => {
            let id = makeId("hs-basic-with-title-and-arrow-stretched-heading-", i);
            let collapseId = makeId("hs-basic-with-title-and-arrow-stretched-collapse", i);
            return (
              <AccordionItem
                {...question}
                id={id}
                collapseId={collapseId}
                first={i === 0}
              />
            );
          })}
        </div>
      </div>
      <div class="w-full lg:w-1/2 xl:w-1/2 lg:flex-shrink-0">
        <div class="hs-accordion-group divide-y divide-neutral-200 dark:divide-neutral-700">
          {rightFaqs.map((question, i) => {
            // Offset index for unique IDs
            let idx = i + leftFaqs.length;
            let id = makeId("hs-basic-with-title-and-arrow-stretched-heading-", idx);
            let collapseId = makeId("hs-basic-with-title-and-arrow-stretched-collapse", idx);
            return (
              <AccordionItem
                {...question}
                id={id}
                collapseId={collapseId}
                first={false}
              />
            );
          })}
        </div>
      </div>
    </div>
  </div>
</section>