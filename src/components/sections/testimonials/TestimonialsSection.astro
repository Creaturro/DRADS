---
import StatsGrid from "../../ui/blocks/StatsGrid.astro";
import PrimaryCTA from "../../ui/buttons/PrimaryCTA.astro";
import SecondaryCTA from "../../ui/buttons/SecondaryCTA.astro";

const {
  title,
  subTitle,
  testimonials,
  statistics
} = Astro.props;

interface Props {
  title: string;
  subTitle?: string;
  testimonials?: Testimonial[];
  statistics?: StatProps[];
}

// TypeScript type for testimonials
type Testimonial = {
  content: string;
  author: string;
  role: string;
  avatarSrc: string;
};

// TypeScript type for stats.
type StatProps = {
  count: string;
  description: string;
};

// Case study logos data
const caseStudyLogos = [
  {
    id: 1,
    title: "Inbox App",
    description: "Transforming cluttered inquiries into structured deals",
    logo: "/images/case-studies/inbox logo large.svg",
    url: "/case-studies#inbox"
  },
  {
    id: 2,
    title: "Live Lead",
    description: "Turning inquiries into sales opportunities at lightning speed",
    logo: "/images/case-studies/live lead logo large.svg",
    url: "/case-studies#live-lead"
  },
  {
    id: 3,
    title: "Printing Shop",
    description: "Improve printing shop operations with real-time management",
    logo: "/images/case-studies/printing logo large.svg",
    url: "/case-studies#printing-shop"
  },
  {
    id: 4,
    title: "Invoice Caddy",
    description: "Streamline invoicing and payments for small businesses",
    logo: "/images/case-studies/invoice logo large.svg",
    url: "/case-studies#invoice-caddy"
  }
];
---

<section
  class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 2xl:max-w-full"
>
  <!-- Container for the case studies preview -->
  <div
    class="lg:grid lg:grid-cols-12 lg:items-center lg:justify-between lg:gap-32"
  >
    <div class="lg:col-span-8 lg:col-start-1">
      <!-- Title and Subtitle -->
      <div class="mb-8">
        <h2 class="font-h2">{title}</h2>
        {subTitle &&
        <p class="font-h3 text-neutral-400">
          {subTitle}
        </p>
      }
      </div>

      <!-- Case Study Logo Buttons -->
      <div class="grid grid-cols-2 gap-4 mb-8">
        {caseStudyLogos.map((caseStudy) => (
          <a 
            href={caseStudy.url}
            class="group bg-neutral-800 rounded-lg p-6 border border-neutral-700 hover:border-primary/50 transition-all duration-300 hover:bg-neutral-700 text-center no-underline"
            data-case-study-link="true"
          >
            <div class="flex flex-col items-center gap-5">
              <img 
                src={caseStudy.logo} 
                alt={caseStudy.title}
                class="h-16 w-auto transition-transform duration-300 group-hover:scale-110"
              />
              <div>
                <p class="text-xs text-neutral-400 line-clamp-2 no-underline">{caseStudy.description}</p>
              </div>
            </div>
          </a>
        ))}
      </div>

      <!-- CTA to view all case studies -->
      <div class="flex gap-4">
        <PrimaryCTA title="View All Case Studies" url="/case-studies" />
        <SecondaryCTA title="Get Custom Quote" url="/contact" />
      </div>
    </div>

    {statistics &&
      <div class="mt-10 lg:col-span-4 lg:col-end-13 lg:mt-[112px]">
        <div class="space-y-6 sm:space-y-8">
          <ul
            class="grid grid-cols-1 divide-y-2 divide-neutral-700 overflow-hidden"
          >
            <!-- Generate a list item for each stat in the statistics array by mapping over the array. -->
            {
              statistics.map((stat, index) => (
                <StatsGrid count={stat.count} description={stat.description} index={index}/>
              ))
            }
          </ul>
        </div>
      </div>
    }
  </div>
</section>
