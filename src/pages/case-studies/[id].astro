import MainLayout from "@/layouts/MainLayout.astro";
import Icon from "@components/ui/icons/Icon.astro";
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro";
import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro";
import ReusableSection from "@components/sections/misc/ReusableSection.astro";

// Get the case study ID from the URL
const { id } = Astro.params;

// Case studies data (same as main page)
const caseStudies = [
  {
    id: 1,
    title: "E-Commerce Platform Transformation",
    client: "TechRetail Inc.",
    industry: "E-Commerce",
    description: "Complete overhaul of legacy e-commerce system with modern microservices architecture, resulting in 300% performance improvement and 50% reduction in maintenance costs.",
    longDescription: "TechRetail Inc. was struggling with a legacy e-commerce platform that couldn't handle their growing customer base and was causing significant performance issues. The old system was monolithic, difficult to maintain, and couldn't scale with their business needs. DRADS was brought in to completely transform their digital infrastructure.",
    challenge: "The existing platform was built on outdated technology, causing slow load times, frequent crashes, and poor user experience. The monolithic architecture made it impossible to scale individual components, and the maintenance costs were skyrocketing.",
    solution: "We designed and implemented a modern microservices architecture using React for the frontend, Node.js for backend services, PostgreSQL for data management, and AWS for cloud infrastructure. The new system featured real-time inventory management, advanced search capabilities, and seamless payment processing.",
    technologies: ["React", "Node.js", "PostgreSQL", "AWS", "Redis", "Docker"],
    metrics: {
      performance: "300%",
      costReduction: "50%",
      timeToMarket: "60%"
    },
    image: "/images/case-studies/ecommerce-platform.avif",
    featured: true
  },
  {
    id: 2,
    title: "Healthcare Management System",
    client: "MediCare Solutions",
    industry: "Healthcare",
    description: "Custom patient management system with HIPAA compliance, real-time data synchronization, and advanced analytics dashboard for healthcare providers.",
    longDescription: "MediCare Solutions needed a comprehensive patient management system that could handle sensitive medical data while providing healthcare providers with real-time insights and analytics. The system had to be fully HIPAA compliant and integrate with existing medical equipment and databases.",
    challenge: "Managing patient data securely while providing real-time access to healthcare providers was a major challenge. The system needed to be HIPAA compliant, integrate with multiple medical devices, and provide analytics without compromising patient privacy.",
    solution: "We developed a secure, cloud-based patient management system using Vue.js for the frontend, Python for backend processing, MongoDB for flexible data storage, and Azure for secure cloud hosting. The system included advanced encryption, audit trails, and real-time data synchronization.",
    technologies: ["Vue.js", "Python", "MongoDB", "Azure", "TensorFlow", "HIPAA APIs"],
    metrics: {
      efficiency: "250%",
      accuracy: "99.9%",
      compliance: "100%"
    },
    image: "/images/case-studies/healthcare-system.avif",
    featured: false
  },
  {
    id: 3,
    title: "Financial Trading Platform",
    client: "TradeFlow Capital",
    industry: "FinTech",
    description: "High-frequency trading platform with real-time market data processing, advanced risk management, and automated trading algorithms.",
    longDescription: "TradeFlow Capital required a high-frequency trading platform that could process millions of market data points per second while maintaining sub-millisecond latency. The platform needed to handle complex trading algorithms and provide comprehensive risk management tools.",
    challenge: "Building a trading platform that could handle high-frequency trading with sub-millisecond latency while maintaining accuracy and reliability was extremely challenging. The system needed to process massive amounts of real-time data and execute trades with perfect precision.",
    solution: "We built a high-performance trading platform using Angular for the user interface, Java for ultra-fast backend processing, Redis for in-memory data storage, and Kubernetes for scalable deployment. The platform included advanced risk management algorithms and real-time market data processing.",
    technologies: ["Angular", "Java", "Redis", "Kubernetes", "Apache Kafka", "Machine Learning"],
    metrics: {
      latency: "0.1ms",
      throughput: "1M+",
      reliability: "99.99%"
    },
    image: "/images/case-studies/trading-platform.avif",
    featured: false
  },
  {
    id: 4,
    title: "Supply Chain Optimization",
    client: "Global Logistics Corp",
    industry: "Logistics",
    description: "End-to-end supply chain management system with IoT integration, predictive analytics, and real-time tracking capabilities.",
    longDescription: "Global Logistics Corp needed a comprehensive supply chain management system that could track shipments in real-time, predict delays, and optimize routes automatically. The system had to integrate with IoT devices and provide predictive analytics for better decision-making.",
    challenge: "Managing a complex global supply chain with thousands of shipments, multiple carriers, and unpredictable variables required a sophisticated system that could provide real-time visibility and predictive insights.",
    solution: "We developed an end-to-end supply chain management system using React Native for mobile access, Go for high-performance backend processing, InfluxDB for time-series data, and Docker for containerized deployment. The system included IoT integration and machine learning for predictive analytics.",
    technologies: ["React Native", "Go", "InfluxDB", "Docker", "IoT APIs", "Machine Learning"],
    metrics: {
      efficiency: "180%",
      costSavings: "35%",
      visibility: "Real-time"
    },
    image: "/images/case-studies/ecommerce-platform.avif", // Using existing image as placeholder
    featured: false
  },
  {
    id: 5,
    title: "Educational Learning Platform",
    client: "EduTech Innovations",
    industry: "Education",
    description: "Comprehensive learning management system with AI-powered content recommendations, virtual classrooms, and advanced assessment tools.",
    longDescription: "EduTech Innovations wanted to create a next-generation learning platform that could personalize education for each student using AI, provide virtual classroom experiences, and offer comprehensive assessment tools for educators.",
    challenge: "Creating a learning platform that could adapt to individual student needs while providing engaging virtual classroom experiences and comprehensive assessment tools required sophisticated AI algorithms and real-time collaboration features.",
    solution: "We built a comprehensive learning management system using Next.js for the frontend, Python for AI processing, TensorFlow for machine learning algorithms, and AWS for scalable cloud hosting. The platform included AI-powered content recommendations and virtual classroom capabilities.",
    technologies: ["Next.js", "Python", "TensorFlow", "AWS", "WebRTC", "AI/ML"],
    metrics: {
      engagement: "200%",
      completion: "85%",
      satisfaction: "4.8/5"
    },
    image: "/images/case-studies/healthcare-system.avif", // Using existing image as placeholder
    featured: false
  },
  {
    id: 6,
    title: "Manufacturing Automation",
    client: "SmartFactory Industries",
    industry: "Manufacturing",
    description: "IoT-driven manufacturing automation system with predictive maintenance, quality control, and production optimization.",
    longDescription: "SmartFactory Industries needed to modernize their manufacturing processes with IoT-driven automation, predictive maintenance capabilities, and real-time quality control. The system had to integrate with existing manufacturing equipment and provide comprehensive analytics.",
    challenge: "Integrating IoT devices with existing manufacturing equipment while providing predictive maintenance and real-time quality control required a sophisticated system that could handle diverse data sources and provide actionable insights.",
    solution: "We developed an IoT-driven manufacturing automation system using Vue.js for the user interface, C# for backend processing, SQL Server for data management, and Azure IoT for device connectivity. The system included predictive maintenance algorithms and real-time quality control.",
    technologies: ["Vue.js", "C#", "SQL Server", "Azure IoT", "Machine Learning", "IoT Protocols"],
    metrics: {
      productivity: "220%",
      downtime: "-70%",
      quality: "99.5%"
    },
    image: "/images/case-studies/trading-platform.avif", // Using existing image as placeholder
    featured: false
  }
];

// Find the specific case study
const caseStudy = caseStudies.find(cs => cs.id === parseInt(id));

// If case study not found, redirect to 404
if (!caseStudy) {
  return Astro.redirect('/404');
}

<MainLayout>
  <!-- Hero Section -->
  <section class="relative py-20 bg-gradient-to-b from-third to-neutral-900">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <div class="flex items-center justify-center gap-4 mb-6">
          <span class="px-4 py-2 bg-primary/20 text-primary rounded-full text-sm font-semibold">
            {caseStudy.industry}
          </span>
          <span class="text-neutral-400 font-h4">{caseStudy.client}</span>
        </div>
        <h1 class="font-h2 mb-6">
          {caseStudy.title}
        </h1>
        <p class="font-h3 max-w-3xl mx-auto">
          {caseStudy.description}
        </p>
      </div>
    </div>
  </section>

  <!-- Project Overview -->
  <ReusableSection 
    title="Project Overview" 
    description="A comprehensive look at the challenges, solutions, and results of this transformation"
  >
    <div slot="leftContent">
      <div class="space-y-8">
        <div>
          <h3 class="font-h4 mb-4 text-primary">The Challenge</h3>
          <p class="text-neutral-300">{caseStudy.challenge}</p>
        </div>
        
        <div>
          <h3 class="font-h4 mb-4 text-primary">Our Solution</h3>
          <p class="text-neutral-300">{caseStudy.solution}</p>
        </div>
        
        <div>
          <h3 class="font-h4 mb-4 text-primary">Technologies Used</h3>
          <div class="flex flex-wrap gap-2">
            {caseStudy.technologies.map(tech => (
              <span class="px-3 py-1 bg-secondary/20 text-secondary rounded-full text-sm">
                {tech}
              </span>
            ))}
          </div>
        </div>
      </div>
    </div>
    
    <div slot="rightContent">
      <div class="space-y-8">
        <div class="bg-third rounded-xl p-6 border border-neutral-700">
          <h3 class="font-h4 mb-6 text-center">Key Results</h3>
          <div class="grid grid-cols-1 gap-6">
            {Object.entries(caseStudy.metrics).map(([key, value]) => (
              <div class="text-center p-4 bg-neutral-800 rounded-lg">
                <div class="text-3xl font-bold text-primary mb-2">{value}</div>
                <div class="text-sm text-neutral-400 capitalize">{key}</div>
              </div>
            ))}
          </div>
        </div>
        
        <div class="bg-third rounded-xl p-6 border border-neutral-700">
          <h3 class="font-h4 mb-4">Project Details</h3>
          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-neutral-400">Industry:</span>
              <span class="text-neutral-100">{caseStudy.industry}</span>
            </div>
            <div class="flex justify-between">
              <span class="text-neutral-400">Client:</span>
              <span class="text-neutral-100">{caseStudy.client}</span>
            </div>
            <div class="flex justify-between">
              <span class="text-neutral-400">Technologies:</span>
              <span class="text-neutral-100">{caseStudy.technologies.length}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ReusableSection>

  <!-- Detailed Description -->
  <section class="py-16 bg-neutral-800">
    <div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8">
      <h2 class="font-h2 mb-8 text-center">Project Details</h2>
      <div class="prose prose-invert max-w-none">
        <p class="font-h3 text-neutral-300 leading-relaxed">
          {caseStudy.longDescription}
        </p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gradient-to-r from-primary/10 to-secondary/10">
    <div class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="font-h2 mb-6">Ready to Start Your Project?</h2>
      <p class="font-h3 mb-8 text-neutral-300">
        Let's discuss how DRADS can transform your business with custom software solutions tailored to your specific needs.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <PrimaryCTA title="Get Custom Quote" url="/contact" />
        <SecondaryCTA title="View All Projects" url="/case-studies" />
      </div>
    </div>
  </section>
</MainLayout> 